<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home page</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
    body { 
        background: radial-gradient(circle at top left, rgba(70, 160, 255, 0.35), transparent 60%),
                    radial-gradient(circle at bottom right, rgba(160, 70, 240, 0.35), transparent 60%),
                    radial-gradient(circle at top right, rgba(255, 105, 180, 0.35), transparent 60%),
                    radial-gradient(circle at center, #0a0a60, #152040 70%, #0d0d0d);
        background-attachment: fixed;
        color: white; 
        height: 100vh; 
        margin: 0; 
        display: flex; 
        flex-direction: column; 
    }

    /* Navbar glass effect */
    .navbar {
        padding-top: 1.2rem; 
        padding-bottom: 1.2rem; 
        background: rgba(255, 255, 255, 0.1) !important;
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-radius: 16px;
        margin: 0.5rem 1rem;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .navbar-brand h3 { 
        color: #fff; 
        font-family: 'Orbitron', sans-serif; 
        font-weight: 600;
        letter-spacing: 1px;
        display: flex;
        align-items: center;
    }
    .navbar-brand h3 i { margin-right: 10px; }

    /* Navbar links white */
    .nav-link { color: white !important; font-weight: 500; }
    .nav-link:hover { text-decoration: underline; }
    .nav-link i { margin-right: 5px; }

    /* Welcome heading */
    .welcome-text {
        text-align: center;
        margin-top: 2rem;
        font-size: 1.8rem;
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
        color: #fff;
    }
    .welcome-subtext {
        font-size: 1rem;
        font-family: 'Poppins', sans-serif;
        color: #ccc;
    }

    /* Visibly hidden for accessibility */
    .visually-hidden {
        position: absolute !important;
        width: 1px !important;
        height: 1px !important;
        padding: 0 !important;
        margin: -1px !important;
        overflow: hidden !important;
        clip: rect(0, 0, 0, 0) !important;
        border: 0 !important;
    }

    /* Register box glass effect */
    .register-box {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        width: 100%; max-width: 420px;
        margin: 1rem auto 2rem auto;
        padding: 2rem;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        color: #fff;
    }
    .register-box h3 { 
        text-align: center; 
        margin-bottom: 1.5rem; 
        font-weight: 600; 
        font-size: 1.6rem; 
        font-family: 'Poppins', sans-serif;
    }

    /* Glass inputs */
    .form-control {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
        color: #fff;
    }
    .form-control::placeholder { color: rgba(255,255,255,0.7); }
    .form-label { 
        font-weight: 500; 
        margin-top: 0.5rem; 
        margin-bottom: 0.2rem; 
        color: #eee; 
        font-family: 'Poppins', sans-serif;
    }

    /* Button with dark magenta/purple shade + shadow */
    .register-btn { 
        width: 160px; 
        background-color: hsla(309, 100%, 37%, 1.00); /* Dark magenta/purple shade */
        border: none; 
        font-weight: 600; 
        font-size: 1rem; 
        color: white; 
        padding: 0.6rem 1rem; 
        border-radius: 0.6rem; 
        cursor: pointer; 
        display: block; 
        margin: 2rem auto 0 auto; 
        text-align: center; 
        transition: 0.3s ease; 
        backdrop-filter: blur(8px);
        font-family: 'Poppins', sans-serif;
        box-shadow: 0 4px 15px rgba(128, 0, 128, 0.5); /* Purple-ish shadow */
    }
    .register-btn:hover { 
        background-color: #550055; /* Darker purple hover */
        box-shadow: 0 6px 20px rgba(128, 0, 128, 0.6); /* Stronger shadow on hover */
    }

    .error-message { color: #ff8080; font-size: 0.85rem; margin-top: 0.25rem; display: none; }
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center" href="{% url 'homepage' %}">
      <h3 class="mb-0"><i class="fa fa-lock"></i> CrypticComm</h3>
    </a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link text-white" href="{% url 'homepage' %}"><i class="fa fa-home"></i> Home</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="{% url 'inboxpage' %}"><i class="fa fa-inbox"></i> Inbox</a></li>
        <li class="nav-item"><a class="nav-link text-white" href="{% url 'aboutus' %}"><i class="fa fa-info-circle"></i> About Us</a></li>
      </ul>
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link text-white" href="{% url 'profilepage' %}"><i class="fa fa-cog"></i> Settings</a></li>
        {% if user.is_authenticated %}
        <li class="nav-item"><a class="nav-link text-danger fw-bold" href="{% url 'logoutpage' %}">Logout</a></li>
        {% else %}
        <li class="nav-item"><a class="nav-link text-white" href="{% url 'loginpage' %}"><i class="fa fa-sign-in-alt"></i> Login</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>

<!-- Welcome Heading -->
<div class="welcome-text">
    Welcome to CrypticComm
</div>
<h5 class="welcome-subtext visually-hidden">Send your msg securely</h5>

<div class="register-box">
    <h3>Register</h3>
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form id="register-form" method="POST" action="{% url 'homepage' %}" novalidate>
        {% csrf_token %}
        <label for="username" class="form-label">Enter your username</label>
        <input type="text" id="username" class="form-control" placeholder="Your Username" name="username" required>

        <label for="email" class="form-label">Enter your email id</label>
        <input type="email" id="email" class="form-control" placeholder="name@gmail.com" name="email" required />
        <div id="email-error" class="error-message">Email must end with @gmail.com</div>

        <label for="password" class="form-label">Enter password</label>
        <input type="password" id="password" class="form-control" placeholder="Password" name="password" required>

        <label for="confirm-password" class="form-label">Confirm password</label>
        <input type="password" id="confirm-password" class="form-control" placeholder="Confirm Password" name="confirmPassword" required>
        <div id="confirm-password-error" class="error-message">Passwords do not match.</div>

        <div class="form-check mt-2">
            <input type="checkbox" class="form-check-input" id="show-password-checkbox" />
            <label class="form-check-label text-white" for="show-password-checkbox">Show Password</label>
        </div>

        <button type="submit" class="register-btn">Register</button>
    </form>

    <p class="text-center mt-3">
        Already registered? 
        <a href="{% url 'loginpage' %}" class="text-decoration-none fw-semibold text-info">Login</a>
    </p>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const showPasswordCheckbox = document.getElementById('show-password-checkbox');
const passwordField = document.getElementById('password');
const confirmPasswordField = document.getElementById('confirm-password');
showPasswordCheckbox.addEventListener('change', function() {
    const type = this.checked ? 'text' : 'password';
    passwordField.type = type;
    confirmPasswordField.type = type;
});
</script>
</body>
</html>
